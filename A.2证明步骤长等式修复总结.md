# A.2 Proof of Theorem 2中长等式修复总结

## 修复的问题

### 1. 第4步中的长等式超过单栏显示问题
**问题**: A.2 Proof of Theorem 2中第4步的等式包含长公式，在单栏中显示时超出边界

**原始等式**:
```latex
$$\mathbb{E}[z'_i] = P(\text{route same}) \cdot \mathbb{E}[z'_i | \text{route same}] + P(\text{route changed}) \cdot \mathbb{E}[z'_i | \text{route changed}] = p_s \cdot \mathbb{E}[z_i] + (1-p_s) \cdot 0 = p_s \cdot \mu_z$$
```

**修复方案**: 将长等式分为两行显示
```latex
$$\mathbb{E}[z'_i] = P(\text{route same}) \cdot \mathbb{E}[z'_i | \text{route same}] + P(\text{route changed}) \cdot \mathbb{E}[z'_i | \text{route changed}]$$
$$= p_s \cdot \mathbb{E}[z_i] + (1-p_s) \cdot 0 = p_s \cdot \mu_z$$
```

### 2. 第5步中的长等式超过单栏显示问题
**问题**: 第5步的等式也包含长公式，在单栏中显示时超出边界

**原始等式**:
```latex
$$\mathbb{E}[Z'_{\text{final}}] = \sum_{i=1}^M \mathbb{E}[z'_i] = \sum_{i=1}^M p_s \cdot \mu_z = M \cdot p_s \cdot \mu_z$$
```

**修复方案**: 将长等式分为两行显示
```latex
$$\mathbb{E}[Z'_{\text{final}}] = \sum_{i=1}^M \mathbb{E}[z'_i] = \sum_{i=1}^M p_s \cdot \mu_z$$
$$= M \cdot p_s \cdot \mu_z$$
```

## 修复策略

### 1. 长等式分行显示
- **逻辑分组**: 将等式的不同部分分行显示
- **保持数学逻辑**: 确保等式的数学含义不变
- **视觉对齐**: 使用等号对齐提高可读性

### 2. 分行原则
- **等号处分行**: 在等号前分行，保持逻辑结构
- **运算符处分行**: 在运算符前分行
- **保持连续性**: 确保等式的逻辑连续性

### 3. 格式统一
- **使用行内数学模式**: 保持 `$$...$$` 格式
- **对齐方式**: 使用等号对齐
- **缩进处理**: 适当的缩进处理

## 修复效果

### 1. 显示效果
- ✅ 长等式现在能在单栏中正确显示
- ✅ 等式内容完整，没有截断
- ✅ 数学符号正确对齐

### 2. 可读性提升
- ✅ 分行显示提高了等式的可读性
- ✅ 逻辑分组使等式结构更清晰
- ✅ 对齐符号使等式更美观

### 3. 格式一致性
- ✅ 所有等式使用统一的格式
- ✅ 分行方式保持一致
- ✅ 缩进处理统一

## 技术细节

### LaTeX数学环境
- **行内数学模式**: 使用 `$$...$$` 环境
- **分行处理**: 使用多个 `$$...$$` 块
- **对齐方式**: 使用等号对齐

### 分行策略
1. **等号处分行**: 在等号前分行，保持对齐
2. **运算符处分行**: 在运算符前分行
3. **逻辑分组**: 将等式的不同部分分组显示

### 格式处理
- **保持数学逻辑**: 确保等式的数学含义不变
- **视觉对齐**: 使用等号对齐提高可读性
- **缩进处理**: 适当的缩进处理

## 验证结果

### 1. 编译检查
- ✅ 无LaTeX编译错误
- ✅ 所有等式正确显示
- ✅ 数学符号正确渲染

### 2. 格式检查
- ✅ 等式分行正确
- ✅ 对齐方式一致
- ✅ 缩进处理合理

### 3. 可读性检查
- ✅ 等式内容完整
- ✅ 逻辑结构清晰
- ✅ 视觉效果良好

## 建议

### 1. 长等式处理
- 对于包含长公式的等式，考虑分行显示
- 保持等式的数学逻辑完整性
- 考虑读者的阅读体验

### 2. 分行策略
- 在逻辑断点处分行
- 保持等式的数学结构
- 使用适当的对齐方式

### 3. 格式统一
- 统一使用相同的分行方式
- 保持对齐的一致性
- 确保所有等式格式统一

## 总结

通过以上修复，A.2 Proof of Theorem 2中的长等式问题已经得到解决：

1. **第4步等式**: 使用分行显示，解决单栏显示问题
2. **第5步等式**: 使用分行显示，提高可读性
3. **格式统一**: 所有等式使用统一的格式和分行方式

这些修复确保了论文在USENIX会议格式要求下的正确显示，所有等式都能在单栏中完整显示，提高了论文的可读性和专业性。
